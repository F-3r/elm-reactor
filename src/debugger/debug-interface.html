<!DOCTYPE html>
<html>
	<head>
		<title>Debugger</title>
		<link rel='icon' href='/_reactor/favicon.ico' sizes='32x32'>
		<script src="/_reactor/debug-interface.js"></script>
	</head>
	<body style="margin: 0;">
		<script type="text/javascript">
			var elmDebugger = Elm.Customized_Debugger.fullscreen({
				host: window.location.host,
				moduleName: window.opener.MODULE_INFO.moduleName,
				fileName: window.opener.MODULE_INFO.fileName
			});

			var foreigns = elmDebugger.foreign;

			foreigns.scroll.subscribe(function(selector) {
				var log = document.querySelector(selector);

				requestAnimationFrame(function() {
					log.scrollTop = log.scrollHeight - log.clientHeight;
				});
			});

			foreigns.askIfScrolled.subscribe(function(selector) {
				var log = document.querySelector(selector);
				var isAtEnd = log.scrollTop === log.scrollHeight - log.clientHeight;

				foreigns.tellIfScrolled.send(isAtEnd);
			});
		</script>
	</body>
</html>
